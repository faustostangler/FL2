@startuml
skinparam componentStyle rectangle
skinparam defaultTextAlignment center

' === ENTRY POINT ===
component run_py as "run.py" 
component cli as "CLIController"

run_py --> cli : instantiates

' === CONFIGURAÇÃO E LOGGER ===
component config as "Config"
component logger as "Logger"

run_py --> config
run_py --> logger
cli --> config
cli --> logger

' === DATA CLEANER ===
component cleaner as "DataCleaner"
run_py --> cleaner
cli --> cleaner

' === SERVICES ===
component company_service as "CompanyService"
component nsd_service as "NsdService"
component fetch_service as "StatementFetchService"
component parse_service as "StatementParseService"

cli --> company_service
cli --> nsd_service
cli --> fetch_service
cli --> parse_service

' === REPOSITORIES ===
component company_repo as "SqlAlchemyCompanyRepository"
component nsd_repo as "SqlAlchemyNsdRepository"
component stmt_repo as "SqlAlchemyStatementRepository"
component stmt_rows_repo as "SqlAlchemyStatementRowsRepository"

company_service --> company_repo
nsd_service --> nsd_repo
fetch_service --> stmt_repo
parse_service --> stmt_rows_repo

' === SCRAPERS / SOURCES ===
component company_scraper as "CompanyExchangeScraper"
component nsd_scraper as "NsdScraper"
component stmt_source as "RequestsStatementSourceAdapter"

company_service --> company_scraper
nsd_service --> nsd_scraper
fetch_service --> stmt_source

@enduml
